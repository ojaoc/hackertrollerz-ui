(this["webpackJsonpui-hackathon"]=this["webpackJsonpui-hackathon"]||[]).push([[0],{172:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(52),r=n.n(s),i=n(7),c=n(8),l=n(10),u=n(9),m=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleClickAgree=function(e){a.props.opinion(!0),a.props.polarity(!0),a.props.lobby(e),a.setState({hasClickedOpinion:!0,room:null}),fetch("https://twit-war.herokuapp.com/api/room?trend="+e+"&opinion=true").then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({isLoaded:!0,room:e}),a.props.setRoom(a.state.room)}),(function(e){a.setState({isLoaded:!0,error:e})}))},a.handleClickDisagree=function(e){a.props.opinion(!0),a.props.polarity(!1),a.props.lobby(e),a.setState({hasClickedOpinion:!0}),fetch("https://twit-war.herokuapp.com/api/room?trend="+e+"&opinion=false").then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({isLoaded:!0,room:e}),a.props.setRoom(a.state.room)}),(function(e){a.setState({isLoaded:!0,error:e})}))},a.state={hasClickedOpinion:!1},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.trends,a=t.username,s=n.map((function(t){return o.a.createElement("div",{className:"trendContainer my-5",key:t.id},o.a.createElement("div",null,o.a.createElement("h5",null,t.name),t.tweet_volume?o.a.createElement("p",{className:"text-muted"},t.tweet_volume," tweets"):null),o.a.createElement("div",{className:"buttonContainer"},o.a.createElement("button",{className:"btn btn-success m-2",onClick:function(){e.handleClickAgree(t.name)}},"Agree"),o.a.createElement("button",{className:"btn btn-danger  m-2",onClick:function(){e.handleClickDisagree(t.name)}},"Disagree")))}));return a.trim()&&!this.state.hasClickedOpinion?o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"jumbotron"},o.a.createElement("h3",{className:"text-center overflow-auto"},"Welcome, ",a,"!"),s)):null}}]),n}(o.a.Component),h=n(30),d=n.n(h),p=n(53),b=n(16),f=n(54),v=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onLoginAttempt=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)({domain:"twitwar.eu.auth0.com",client_id:"g7vWpCLneLdOPUeRx5KHeskBEwbcPQUa"});case 2:return t=e.sent,e.next=5,t.loginWithRedirect({redirect_uri:"https://ojaoc.github.io/hackertrollerz-ui/"});case 5:console.log(t);case 6:case"end":return e.stop()}}),e)}))),a.state={username:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a}return Object(c.a)(n,[{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleSubmit",value:function(e){this.props.setUsername(this.state.username),e.preventDefault()}},{key:"render",value:function(){return this.props.username.trim()?null:o.a.createElement("div",{className:"jumbotron centered"},o.a.createElement("div",{className:"form-group"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{className:"p-2"},"Username:",o.a.createElement("input",{className:"form-control",type:"text",value:this.state.username,onChange:this.handleChange})),o.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-primary"})))))}}]),n}(o.a.Component),g=n(57),k=n(55),y=n.n(k),O=n(56),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onMessageReceive=function(e,t){var n={author:e.sender,message:e.content};a.setState((function(e){return{messages:[].concat(Object(g.a)(e.messages),[n])}}))},a.sendMessage=function(e,t){try{var n={sender:a.props.username,content:t.message,type:"CHAT"};return console.log(n),a.clientRef.sendMessage("/trend/"+a.props.room,JSON.stringify(n)),!0}catch(o){return!1}},a.state={error:null,isLoaded:!1,clientConnected:!1,messages:[],room:null},a}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return this.props.opinion?o.a.createElement("div",{className:"jumbotron centered"},o.a.createElement("div",null,o.a.createElement(O.TalkBox,{topic:this.props.lobby,currentUserId:this.randomUserId,currentUser:this.randomUserName,messages:this.state.messages,onSendMessage:this.sendMessage,connected:this.state.clientConnected}),o.a.createElement(y.a,{url:"https://twit-war.herokuapp.com/ws",topics:["/trend/"+this.props.room],onMessage:this.onMessageReceive,ref:function(t){e.clientRef=t},onConnect:function(){e.setState({clientConnected:!0})},onDisconnect:function(){e.setState({clientConnected:!1})},debug:!1}))):null}}]),n}(o.a.Component),E=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setUser=function(e){a.setState({username:e})},a.setHasClickedOpinion=function(e){a.setState({hasClickedOpinion:e})},a.setLobby=function(e){a.setState({lobby:e})},a.setPolarity=function(e){a.setState({polarity:e})},a.setRoom=function(e){a.setState({room:e})},a.state={username:"",error:null,isLoaded:!1,trends:[],hasClickedOpinion:!1,lobby:"",polarity:null,room:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://twit-war.herokuapp.com/api/trends?bt=AAAAAAAAAAAAAAAAAAAAAC2uDwEAAAAAuUTw%2FQnHL9lqek0ODTp64ROuGBU%3D7fwFkHZVgPMjz3FdOVhZlsE7idVKtyI2kJj6zofXQx8JduNHvh").then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,trends:t[0].trends})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.isLoaded;e.trends;return t?o.a.createElement("div",null,"Error: ",t.message):n?(console.log(this.state.trends),o.a.createElement(o.a.Fragment,null,o.a.createElement(v,{setUsername:this.setUser,username:this.state.username}),o.a.createElement(m,{trends:this.state.trends,username:this.state.username,opinion:this.setHasClickedOpinion,polarity:this.setPolarity,lobby:this.setLobby,setRoom:this.setRoom}),o.a.createElement(C,{username:this.state.username,opinion:this.state.hasClickedOpinion,polarity:this.state.polarity,lobby:this.state.lobby,room:this.state.room}))):o.a.createElement("div",null,"Loading...")}}]),n}(o.a.Component);n(171),n(172),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,t,n){e.exports=n(173)}},[[58,1,2]]]);